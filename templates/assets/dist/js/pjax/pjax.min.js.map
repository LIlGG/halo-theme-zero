{"version":3,"file":"pjax.min.js","sources":["../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/foreach-els.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/eval-script.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/execute-scripts.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/events/on.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/switches.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/parse-options.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/uniqueid.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/events/trigger.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/util/clone.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/util/contains.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/util/extend.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/util/noop.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/proto/log.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/proto/parse-element.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/proto/attach-link.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/proto/attach-form.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/foreach-selectors.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/switches-selectors.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/abort-request.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/util/update-query-string.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/send-request.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/proto/handle-response.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/lib/is-supported.js","../../../../../node_modules/.pnpm/pjax@0.2.8/node_modules/pjax/index.js","../../../../../src/js/pjax/pjax.ts"],"sourcesContent":["/* global HTMLCollection: true */\n\nmodule.exports = function(els, fn, context) {\n  if (\n    els instanceof HTMLCollection ||\n    els instanceof NodeList ||\n    els instanceof Array\n  ) {\n    return Array.prototype.forEach.call(els, fn, context);\n  }\n  // assume simple DOM element\n  return fn.call(context, els);\n};\n","module.exports = function(el) {\n  var code = el.text || el.textContent || el.innerHTML || \"\";\n  var src = el.src || \"\";\n  var parent =\n    el.parentNode || document.querySelector(\"head\") || document.documentElement;\n  var script = document.createElement(\"script\");\n\n  if (code.match(\"document.write\")) {\n    if (console && console.log) {\n      console.log(\n        \"Script contains document.write. Can’t be executed correctly. Code skipped \",\n        el\n      );\n    }\n    return false;\n  }\n\n  script.type = \"text/javascript\";\n  script.id = el.id;\n\n  /* istanbul ignore if */\n  if (src !== \"\") {\n    script.src = src;\n    script.async = false; // force synchronous loading of peripheral JS\n  }\n\n  if (code !== \"\") {\n    try {\n      script.appendChild(document.createTextNode(code));\n    } catch (e) {\n      /* istanbul ignore next */\n      // old IEs have funky script nodes\n      script.text = code;\n    }\n  }\n\n  // execute\n  parent.appendChild(script);\n  // avoid pollution only in head or body tags\n  if (\n    (parent instanceof HTMLHeadElement || parent instanceof HTMLBodyElement) &&\n    parent.contains(script)\n  ) {\n    parent.removeChild(script);\n  }\n\n  return true;\n};\n","var forEachEls = require(\"./foreach-els\");\nvar evalScript = require(\"./eval-script\");\n// Finds and executes scripts (used for newly added elements)\n// Needed since innerHTML does not run scripts\nmodule.exports = function(el) {\n  if (el.tagName.toLowerCase() === \"script\") {\n    evalScript(el);\n  }\n\n  forEachEls(el.querySelectorAll(\"script\"), function(script) {\n    if (!script.type || script.type.toLowerCase() === \"text/javascript\") {\n      if (script.parentNode) {\n        script.parentNode.removeChild(script);\n      }\n      evalScript(script);\n    }\n  });\n};\n","var forEachEls = require(\"../foreach-els\");\n\nmodule.exports = function(els, events, listener, useCapture) {\n  events = typeof events === \"string\" ? events.split(\" \") : events;\n\n  events.forEach(function(e) {\n    forEachEls(els, function(el) {\n      el.addEventListener(e, listener, useCapture);\n    });\n  });\n};\n","var on = require(\"./events/on\");\n\nmodule.exports = {\n  outerHTML: function(oldEl, newEl) {\n    oldEl.outerHTML = newEl.outerHTML;\n    this.onSwitch();\n  },\n\n  innerHTML: function(oldEl, newEl) {\n    oldEl.innerHTML = newEl.innerHTML;\n\n    if (newEl.className === \"\") {\n      oldEl.removeAttribute(\"class\");\n    } else {\n      oldEl.className = newEl.className;\n    }\n\n    this.onSwitch();\n  },\n\n  switchElementsAlt: function(oldEl, newEl) {\n    oldEl.innerHTML = newEl.innerHTML;\n\n    // Copy attributes from the new element to the old one\n    if (newEl.hasAttributes()) {\n      var attrs = newEl.attributes;\n      for (var i = 0; i < attrs.length; i++) {\n        oldEl.attributes.setNamedItem(attrs[i].cloneNode());\n      }\n    }\n\n    this.onSwitch();\n  },\n\n  // Equivalent to outerHTML(), but doesn't require switchElementsAlt() for <head> and <body>\n  replaceNode: function(oldEl, newEl) {\n    oldEl.parentNode.replaceChild(newEl, oldEl);\n    this.onSwitch();\n  },\n\n  sideBySide: function(oldEl, newEl, options, switchOptions) {\n    var forEach = Array.prototype.forEach;\n    var elsToRemove = [];\n    var elsToAdd = [];\n    var fragToAppend = document.createDocumentFragment();\n    var animationEventNames =\n      \"animationend webkitAnimationEnd MSAnimationEnd oanimationend\";\n    var animatedElsNumber = 0;\n    var sexyAnimationEnd = function(e) {\n      if (e.target !== e.currentTarget) {\n        // end triggered by an animation on a child\n        return;\n      }\n\n      animatedElsNumber--;\n      if (animatedElsNumber <= 0 && elsToRemove) {\n        elsToRemove.forEach(function(el) {\n          // browsing quickly can make the el\n          // already removed by last page update ?\n          if (el.parentNode) {\n            el.parentNode.removeChild(el);\n          }\n        });\n\n        elsToAdd.forEach(function(el) {\n          el.className = el.className.replace(\n            el.getAttribute(\"data-pjax-classes\"),\n            \"\"\n          );\n          el.removeAttribute(\"data-pjax-classes\");\n        });\n\n        elsToAdd = null; // free memory\n        elsToRemove = null; // free memory\n\n        // this is to trigger some repaint (example: picturefill)\n        this.onSwitch();\n      }\n    }.bind(this);\n\n    switchOptions = switchOptions || {};\n\n    forEach.call(oldEl.childNodes, function(el) {\n      elsToRemove.push(el);\n      if (el.classList && !el.classList.contains(\"js-Pjax-remove\")) {\n        // for fast switch, clean element that just have been added, & not cleaned yet.\n        if (el.hasAttribute(\"data-pjax-classes\")) {\n          el.className = el.className.replace(\n            el.getAttribute(\"data-pjax-classes\"),\n            \"\"\n          );\n          el.removeAttribute(\"data-pjax-classes\");\n        }\n        el.classList.add(\"js-Pjax-remove\");\n        if (switchOptions.callbacks && switchOptions.callbacks.removeElement) {\n          switchOptions.callbacks.removeElement(el);\n        }\n        if (switchOptions.classNames) {\n          el.className +=\n            \" \" +\n            switchOptions.classNames.remove +\n            \" \" +\n            (options.backward\n              ? switchOptions.classNames.backward\n              : switchOptions.classNames.forward);\n        }\n        animatedElsNumber++;\n        on(el, animationEventNames, sexyAnimationEnd, true);\n      }\n    });\n\n    forEach.call(newEl.childNodes, function(el) {\n      if (el.classList) {\n        var addClasses = \"\";\n        if (switchOptions.classNames) {\n          addClasses =\n            \" js-Pjax-add \" +\n            switchOptions.classNames.add +\n            \" \" +\n            (options.backward\n              ? switchOptions.classNames.forward\n              : switchOptions.classNames.backward);\n        }\n        if (switchOptions.callbacks && switchOptions.callbacks.addElement) {\n          switchOptions.callbacks.addElement(el);\n        }\n        el.className += addClasses;\n        el.setAttribute(\"data-pjax-classes\", addClasses);\n        elsToAdd.push(el);\n        fragToAppend.appendChild(el);\n        animatedElsNumber++;\n        on(el, animationEventNames, sexyAnimationEnd, true);\n      }\n    });\n\n    // pass all className of the parent\n    oldEl.className = newEl.className;\n    oldEl.appendChild(fragToAppend);\n  }\n};\n","/* global _gaq: true, ga: true */\n\nvar defaultSwitches = require(\"./switches\");\n\nmodule.exports = function(options) {\n  options = options || {};\n  options.elements = options.elements || \"a[href], form[action]\";\n  options.selectors = options.selectors || [\"title\", \".js-Pjax\"];\n  options.switches = options.switches || {};\n  options.switchesOptions = options.switchesOptions || {};\n  options.history =\n    typeof options.history === \"undefined\" ? true : options.history;\n  options.analytics =\n    typeof options.analytics === \"function\" || options.analytics === false\n      ? options.analytics\n      : defaultAnalytics;\n  options.scrollTo =\n    typeof options.scrollTo === \"undefined\" ? 0 : options.scrollTo;\n  options.scrollRestoration =\n    typeof options.scrollRestoration !== \"undefined\"\n      ? options.scrollRestoration\n      : true;\n  options.cacheBust =\n    typeof options.cacheBust === \"undefined\" ? true : options.cacheBust;\n  options.debug = options.debug || false;\n  options.timeout = options.timeout || 0;\n  options.currentUrlFullReload =\n    typeof options.currentUrlFullReload === \"undefined\"\n      ? false\n      : options.currentUrlFullReload;\n\n  // We can’t replace body.outerHTML or head.outerHTML.\n  // It creates a bug where a new body or head are created in the DOM.\n  // If you set head.outerHTML, a new body tag is appended, so the DOM has 2 body nodes, and vice versa\n  if (!options.switches.head) {\n    options.switches.head = defaultSwitches.switchElementsAlt;\n  }\n  if (!options.switches.body) {\n    options.switches.body = defaultSwitches.switchElementsAlt;\n  }\n\n  return options;\n};\n\n/* istanbul ignore next */\nfunction defaultAnalytics() {\n  if (window._gaq) {\n    _gaq.push([\"_trackPageview\"]);\n  }\n  if (window.ga) {\n    ga(\"send\", \"pageview\", { page: location.pathname, title: document.title });\n  }\n}\n","module.exports = (function() {\n  var counter = 0;\n  return function() {\n    var id = \"pjax\" + new Date().getTime() + \"_\" + counter;\n    counter++;\n    return id;\n  };\n})();\n","var forEachEls = require(\"../foreach-els\");\n\nmodule.exports = function(els, events, opts) {\n  events = typeof events === \"string\" ? events.split(\" \") : events;\n\n  events.forEach(function(e) {\n    var event;\n    event = document.createEvent(\"HTMLEvents\");\n    event.initEvent(e, true, true);\n    event.eventName = e;\n    if (opts) {\n      Object.keys(opts).forEach(function(key) {\n        event[key] = opts[key];\n      });\n    }\n\n    forEachEls(els, function(el) {\n      var domFix = false;\n      if (!el.parentNode && el !== document && el !== window) {\n        // THANK YOU IE (9/10/11)\n        // dispatchEvent doesn't work if the element is not in the DOM\n        domFix = true;\n        document.body.appendChild(el);\n      }\n      el.dispatchEvent(event);\n      if (domFix) {\n        el.parentNode.removeChild(el);\n      }\n    });\n  });\n};\n","module.exports = function(obj) {\n  /* istanbul ignore if */\n  if (null === obj || \"object\" !== typeof obj) {\n    return obj;\n  }\n  var copy = obj.constructor();\n  for (var attr in obj) {\n    if (obj.hasOwnProperty(attr)) {\n      copy[attr] = obj[attr];\n    }\n  }\n  return copy;\n};\n","module.exports = function contains(doc, selectors, el) {\n  for (var i = 0; i < selectors.length; i++) {\n    var selectedEls = doc.querySelectorAll(selectors[i]);\n    for (var j = 0; j < selectedEls.length; j++) {\n      if (selectedEls[j].contains(el)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n","module.exports = function(target) {\n  if (target == null) {\n    return null;\n  }\n\n  var to = Object(target);\n\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    if (source != null) {\n      for (var key in source) {\n        // Avoid bugs when hasOwnProperty is shadowed\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          to[key] = source[key];\n        }\n      }\n    }\n  }\n  return to;\n};\n","module.exports = function() {};\n","module.exports = function() {\n  if (this.options.debug && console) {\n    if (typeof console.log === \"function\") {\n      console.log.apply(console, arguments);\n    }\n    // IE is weird\n    else if (console.log) {\n      console.log(arguments);\n    }\n  }\n};\n","var attrState = \"data-pjax-state\";\n\nmodule.exports = function(el) {\n  switch (el.tagName.toLowerCase()) {\n    case \"a\":\n      // only attach link if el does not already have link attached\n      if (!el.hasAttribute(attrState)) {\n        this.attachLink(el);\n      }\n      break;\n\n    case \"form\":\n      // only attach link if el does not already have link attached\n      if (!el.hasAttribute(attrState)) {\n        this.attachForm(el);\n      }\n      break;\n\n    default:\n      throw \"Pjax can only be applied on <a> or <form> submit\";\n  }\n};\n","var on = require(\"../events/on\");\nvar clone = require(\"../util/clone\");\n\nvar attrState = \"data-pjax-state\";\n\nvar linkAction = function(el, event) {\n  if (isDefaultPrevented(event)) {\n    return;\n  }\n\n  // Since loadUrl modifies options and we may add our own modifications below,\n  // clone it so the changes don't persist\n  var options = clone(this.options);\n\n  var attrValue = checkIfShouldAbort(el, event);\n  if (attrValue) {\n    el.setAttribute(attrState, attrValue);\n    return;\n  }\n\n  event.preventDefault();\n\n  // don’t do \"nothing\" if user try to reload the page by clicking the same link twice\n  if (\n    this.options.currentUrlFullReload &&\n    el.href === window.location.href.split(\"#\")[0]\n  ) {\n    el.setAttribute(attrState, \"reload\");\n    this.reload();\n    return;\n  }\n\n  el.setAttribute(attrState, \"load\");\n\n  options.triggerElement = el;\n  this.loadUrl(el.href, options);\n};\n\nfunction checkIfShouldAbort(el, event) {\n  // Don’t break browser special behavior on links (like page in new window)\n  if (\n    event.which > 1 ||\n    event.metaKey ||\n    event.ctrlKey ||\n    event.shiftKey ||\n    event.altKey\n  ) {\n    return \"modifier\";\n  }\n\n  // we do test on href now to prevent unexpected behavior if for some reason\n  // user have href that can be dynamically updated\n\n  // Ignore external links.\n  if (\n    el.protocol !== window.location.protocol ||\n    el.host !== window.location.host\n  ) {\n    return \"external\";\n  }\n\n  // Ignore anchors on the same page (keep native behavior)\n  if (\n    el.hash &&\n    el.href.replace(el.hash, \"\") ===\n      window.location.href.replace(location.hash, \"\")\n  ) {\n    return \"anchor\";\n  }\n\n  // Ignore empty anchor \"foo.html#\"\n  if (el.href === window.location.href.split(\"#\")[0] + \"#\") {\n    return \"anchor-empty\";\n  }\n}\n\nvar isDefaultPrevented = function(event) {\n  return event.defaultPrevented || event.returnValue === false;\n};\n\nmodule.exports = function(el) {\n  var that = this;\n\n  el.setAttribute(attrState, \"\");\n\n  on(el, \"click\", function(event) {\n    linkAction.call(that, el, event);\n  });\n\n  on(\n    el,\n    \"keyup\",\n    function(event) {\n      if (event.keyCode === 13) {\n        linkAction.call(that, el, event);\n      }\n    }.bind(this)\n  );\n};\n","var on = require(\"../events/on\");\nvar clone = require(\"../util/clone\");\n\nvar attrState = \"data-pjax-state\";\n\nvar formAction = function(el, event) {\n  if (isDefaultPrevented(event)) {\n    return;\n  }\n\n  // Since loadUrl modifies options and we may add our own modifications below,\n  // clone it so the changes don't persist\n  var options = clone(this.options);\n\n  // Initialize requestOptions\n  options.requestOptions = {\n    requestUrl: el.getAttribute(\"action\") || window.location.href,\n    requestMethod: el.getAttribute(\"method\") || \"GET\"\n  };\n\n  // create a testable virtual link of the form action\n  var virtLinkElement = document.createElement(\"a\");\n  virtLinkElement.setAttribute(\"href\", options.requestOptions.requestUrl);\n\n  var attrValue = checkIfShouldAbort(virtLinkElement, options);\n  if (attrValue) {\n    el.setAttribute(attrState, attrValue);\n    return;\n  }\n\n  event.preventDefault();\n\n  if (el.enctype === \"multipart/form-data\") {\n    options.requestOptions.formData = new FormData(el);\n  } else {\n    options.requestOptions.requestParams = parseFormElements(el);\n  }\n\n  el.setAttribute(attrState, \"submit\");\n\n  options.triggerElement = el;\n  this.loadUrl(virtLinkElement.href, options);\n};\n\nfunction parseFormElements(el) {\n  var requestParams = [];\n  var formElements = el.elements;\n\n  for (var i = 0; i < formElements.length; i++) {\n    var element = formElements[i];\n    var tagName = element.tagName.toLowerCase();\n    // jscs:disable disallowImplicitTypeConversion\n    if (\n      !!element.name &&\n      element.attributes !== undefined &&\n      tagName !== \"button\"\n    ) {\n      // jscs:enable disallowImplicitTypeConversion\n      var type = element.attributes.type;\n\n      if (\n        !type ||\n        (type.value !== \"checkbox\" && type.value !== \"radio\") ||\n        element.checked\n      ) {\n        // Build array of values to submit\n        var values = [];\n\n        if (tagName === \"select\") {\n          var opt;\n\n          for (var j = 0; j < element.options.length; j++) {\n            opt = element.options[j];\n            if (opt.selected && !opt.disabled) {\n              values.push(opt.hasAttribute(\"value\") ? opt.value : opt.text);\n            }\n          }\n        } else {\n          values.push(element.value);\n        }\n\n        for (var k = 0; k < values.length; k++) {\n          requestParams.push({\n            name: encodeURIComponent(element.name),\n            value: encodeURIComponent(values[k])\n          });\n        }\n      }\n    }\n  }\n\n  return requestParams;\n}\n\nfunction checkIfShouldAbort(virtLinkElement, options) {\n  // Ignore external links.\n  if (\n    virtLinkElement.protocol !== window.location.protocol ||\n    virtLinkElement.host !== window.location.host\n  ) {\n    return \"external\";\n  }\n\n  // Ignore click if we are on an anchor on the same page\n  if (\n    virtLinkElement.hash &&\n    virtLinkElement.href.replace(virtLinkElement.hash, \"\") ===\n      window.location.href.replace(location.hash, \"\")\n  ) {\n    return \"anchor\";\n  }\n\n  // Ignore empty anchor \"foo.html#\"\n  if (virtLinkElement.href === window.location.href.split(\"#\")[0] + \"#\") {\n    return \"anchor-empty\";\n  }\n\n  // if declared as a full reload, just normally submit the form\n  if (\n    options.currentUrlFullReload &&\n    virtLinkElement.href === window.location.href.split(\"#\")[0]\n  ) {\n    return \"reload\";\n  }\n}\n\nvar isDefaultPrevented = function(event) {\n  return event.defaultPrevented || event.returnValue === false;\n};\n\nmodule.exports = function(el) {\n  var that = this;\n\n  el.setAttribute(attrState, \"\");\n\n  on(el, \"submit\", function(event) {\n    formAction.call(that, el, event);\n  });\n};\n","var forEachEls = require(\"./foreach-els\");\n\nmodule.exports = function(selectors, cb, context, DOMcontext) {\n  DOMcontext = DOMcontext || document;\n  selectors.forEach(function(selector) {\n    forEachEls(DOMcontext.querySelectorAll(selector), cb, context);\n  });\n};\n","var forEachEls = require(\"./foreach-els\");\n\nvar defaultSwitches = require(\"./switches\");\n\nmodule.exports = function(\n  switches,\n  switchesOptions,\n  selectors,\n  fromEl,\n  toEl,\n  options\n) {\n  var switchesQueue = [];\n\n  selectors.forEach(function(selector) {\n    var newEls = fromEl.querySelectorAll(selector);\n    var oldEls = toEl.querySelectorAll(selector);\n    if (this.log) {\n      this.log(\"Pjax switch\", selector, newEls, oldEls);\n    }\n    if (newEls.length !== oldEls.length) {\n      throw \"DOM doesn’t look the same on new loaded page: ’\" +\n        selector +\n        \"’ - new \" +\n        newEls.length +\n        \", old \" +\n        oldEls.length;\n    }\n\n    forEachEls(\n      newEls,\n      function(newEl, i) {\n        var oldEl = oldEls[i];\n        if (this.log) {\n          this.log(\"newEl\", newEl, \"oldEl\", oldEl);\n        }\n\n        var callback = switches[selector]\n          ? switches[selector].bind(\n              this,\n              oldEl,\n              newEl,\n              options,\n              switchesOptions[selector]\n            )\n          : defaultSwitches.outerHTML.bind(this, oldEl, newEl, options);\n\n        switchesQueue.push(callback);\n      },\n      this\n    );\n  }, this);\n\n  this.state.numPendingSwitches = switchesQueue.length;\n\n  switchesQueue.forEach(function(queuedSwitch) {\n    queuedSwitch();\n  });\n};\n","var noop = require(\"./util/noop\");\n\nmodule.exports = function(request) {\n  if (request && request.readyState < 4) {\n    request.onreadystatechange = noop;\n    request.abort();\n  }\n};\n","module.exports = function(uri, key, value) {\n  var re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n  var separator = uri.indexOf(\"?\") !== -1 ? \"&\" : \"?\";\n  if (uri.match(re)) {\n    return uri.replace(re, \"$1\" + key + \"=\" + value + \"$2\");\n  } else {\n    return uri + separator + key + \"=\" + value;\n  }\n};\n","var updateQueryString = require(\"./util/update-query-string\");\n\nmodule.exports = function(location, options, callback) {\n  options = options || {};\n  var queryString;\n  var requestOptions = options.requestOptions || {};\n  var requestMethod = (requestOptions.requestMethod || \"GET\").toUpperCase();\n  var requestParams = requestOptions.requestParams || null;\n  var formData = requestOptions.formData || null;\n  var requestPayload = null;\n  var request = new XMLHttpRequest();\n  var timeout = options.timeout || 0;\n\n  request.onreadystatechange = function() {\n    if (request.readyState === 4) {\n      if (request.status === 200) {\n        callback(request.responseText, request, location, options);\n      } else if (request.status !== 0) {\n        callback(null, request, location, options);\n      }\n    }\n  };\n\n  request.onerror = function(e) {\n    console.log(e);\n    callback(null, request, location, options);\n  };\n\n  request.ontimeout = function() {\n    callback(null, request, location, options);\n  };\n\n  // Prepare the request payload for forms, if available\n  if (requestParams && requestParams.length) {\n    // Build query string\n    queryString = requestParams\n      .map(function(param) {\n        return param.name + \"=\" + param.value;\n      })\n      .join(\"&\");\n\n    switch (requestMethod) {\n      case \"GET\":\n        // Reset query string to avoid an issue with repeat submissions where checkboxes that were\n        // previously checked are incorrectly preserved\n        location = location.split(\"?\")[0];\n\n        // Append new query string\n        location += \"?\" + queryString;\n        break;\n\n      case \"POST\":\n        // Send query string as request payload\n        requestPayload = queryString;\n        break;\n    }\n  } else if (formData) {\n    requestPayload = formData;\n  }\n\n  // Add a timestamp as part of the query string if cache busting is enabled\n  if (options.cacheBust) {\n    location = updateQueryString(location, \"t\", Date.now());\n  }\n\n  request.open(requestMethod, location, true);\n  request.timeout = timeout;\n  request.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n  request.setRequestHeader(\"X-PJAX\", \"true\");\n  request.setRequestHeader(\n    \"X-PJAX-Selectors\",\n    JSON.stringify(options.selectors)\n  );\n\n  // Send the proper header information for POST forms\n  if (requestPayload && requestMethod === \"POST\" && !formData) {\n    request.setRequestHeader(\n      \"Content-Type\",\n      \"application/x-www-form-urlencoded\"\n    );\n  }\n\n  request.send(requestPayload);\n\n  return request;\n};\n","var clone = require(\"../util/clone\");\nvar newUid = require(\"../uniqueid\");\nvar trigger = require(\"../events/trigger\");\n\nmodule.exports = function(responseText, request, href, options) {\n  options = clone(options || this.options);\n  options.request = request;\n\n  // Fail if unable to load HTML via AJAX\n  if (responseText === false) {\n    trigger(document, \"pjax:complete pjax:error\", options);\n\n    return;\n  }\n\n  // push scroll position to history\n  var currentState = window.history.state || {};\n  window.history.replaceState(\n    {\n      url: currentState.url || window.location.href,\n      title: currentState.title || document.title,\n      uid: currentState.uid || newUid(),\n      scrollPos: [\n        document.documentElement.scrollLeft || document.body.scrollLeft,\n        document.documentElement.scrollTop || document.body.scrollTop\n      ]\n    },\n    document.title,\n    window.location.href\n  );\n\n  // Check for redirects\n  var oldHref = href;\n  if (request.responseURL) {\n    if (href !== request.responseURL) {\n      href = request.responseURL;\n    }\n  } else if (request.getResponseHeader(\"X-PJAX-URL\")) {\n    href = request.getResponseHeader(\"X-PJAX-URL\");\n  } else if (request.getResponseHeader(\"X-XHR-Redirected-To\")) {\n    href = request.getResponseHeader(\"X-XHR-Redirected-To\");\n  }\n\n  // Add back the hash if it was removed\n  var a = document.createElement(\"a\");\n  a.href = oldHref;\n  var oldHash = a.hash;\n  a.href = href;\n  if (oldHash && !a.hash) {\n    a.hash = oldHash;\n    href = a.href;\n  }\n\n  this.state.href = href;\n  this.state.options = options;\n\n  try {\n    this.loadContent(responseText, options);\n  } catch (e) {\n    trigger(document, \"pjax:error\", options);\n\n    if (!this.options.debug) {\n      if (console && console.error) {\n        console.error(\"Pjax switch fail: \", e);\n      }\n      return this.latestChance(href);\n    } else {\n      throw e;\n    }\n  }\n};\n","module.exports = function() {\n  // Borrowed wholesale from https://github.com/defunkt/jquery-pjax\n  return (\n    window.history &&\n    window.history.pushState &&\n    window.history.replaceState &&\n    // pushState isn’t reliable on iOS until 5.\n    !navigator.userAgent.match(\n      /((iPod|iPhone|iPad).+\\bOS\\s+[1-4]\\D|WebApps\\/.+CFNetwork)/\n    )\n  );\n};\n","var executeScripts = require(\"./lib/execute-scripts\");\nvar forEachEls = require(\"./lib/foreach-els\");\nvar parseOptions = require(\"./lib/parse-options\");\nvar switches = require(\"./lib/switches\");\nvar newUid = require(\"./lib/uniqueid\");\n\nvar on = require(\"./lib/events/on\");\nvar trigger = require(\"./lib/events/trigger\");\n\nvar clone = require(\"./lib/util/clone\");\nvar contains = require(\"./lib/util/contains\");\nvar extend = require(\"./lib/util/extend\");\nvar noop = require(\"./lib/util/noop\");\n\nvar Pjax = function(options) {\n  this.state = {\n    numPendingSwitches: 0,\n    href: null,\n    options: null\n  };\n\n  this.options = parseOptions(options);\n  this.log(\"Pjax options\", this.options);\n\n  if (this.options.scrollRestoration && \"scrollRestoration\" in history) {\n    history.scrollRestoration = \"manual\";\n  }\n\n  this.maxUid = this.lastUid = newUid();\n\n  this.parseDOM(document);\n\n  on(\n    window,\n    \"popstate\",\n    function(st) {\n      if (st.state) {\n        var opt = clone(this.options);\n        opt.url = st.state.url;\n        opt.title = st.state.title;\n        // Since state already exists, prevent it from being pushed again\n        opt.history = false;\n        opt.scrollPos = st.state.scrollPos;\n        if (st.state.uid < this.lastUid) {\n          opt.backward = true;\n        } else {\n          opt.forward = true;\n        }\n        this.lastUid = st.state.uid;\n\n        // @todo implement history cache here, based on uid\n        this.loadUrl(st.state.url, opt);\n      }\n    }.bind(this)\n  );\n};\n\nPjax.switches = switches;\n\nPjax.prototype = {\n  log: require(\"./lib/proto/log\"),\n\n  getElements: function(el) {\n    return el.querySelectorAll(this.options.elements);\n  },\n\n  parseDOM: function(el) {\n    var parseElement = require(\"./lib/proto/parse-element\");\n    forEachEls(this.getElements(el), parseElement, this);\n  },\n\n  refresh: function(el) {\n    this.parseDOM(el || document);\n  },\n\n  reload: function() {\n    window.location.reload();\n  },\n\n  attachLink: require(\"./lib/proto/attach-link\"),\n\n  attachForm: require(\"./lib/proto/attach-form\"),\n\n  forEachSelectors: function(cb, context, DOMcontext) {\n    return require(\"./lib/foreach-selectors\").bind(this)(\n      this.options.selectors,\n      cb,\n      context,\n      DOMcontext\n    );\n  },\n\n  switchSelectors: function(selectors, fromEl, toEl, options) {\n    return require(\"./lib/switches-selectors\").bind(this)(\n      this.options.switches,\n      this.options.switchesOptions,\n      selectors,\n      fromEl,\n      toEl,\n      options\n    );\n  },\n\n  latestChance: function(href) {\n    window.location = href;\n  },\n\n  onSwitch: function() {\n    trigger(window, \"resize scroll\");\n\n    this.state.numPendingSwitches--;\n\n    // debounce calls, so we only run this once after all switches are finished.\n    if (this.state.numPendingSwitches === 0) {\n      this.afterAllSwitches();\n    }\n  },\n\n  loadContent: function(html, options) {\n    if (typeof html !== \"string\") {\n      trigger(document, \"pjax:complete pjax:error\", options);\n\n      return;\n    }\n\n    var tmpEl = document.implementation.createHTMLDocument(\"pjax\");\n\n    // parse HTML attributes to copy them\n    // since we are forced to use documentElement.innerHTML (outerHTML can't be used for <html>)\n    var htmlRegex = /<html[^>]+>/gi;\n    var htmlAttribsRegex = /\\s?[a-z:]+(?:=['\"][^'\">]+['\"])*/gi;\n    var matches = html.match(htmlRegex);\n    if (matches && matches.length) {\n      matches = matches[0].match(htmlAttribsRegex);\n      if (matches.length) {\n        matches.shift();\n        matches.forEach(function(htmlAttrib) {\n          var attr = htmlAttrib.trim().split(\"=\");\n          if (attr.length === 1) {\n            tmpEl.documentElement.setAttribute(attr[0], true);\n          } else {\n            tmpEl.documentElement.setAttribute(attr[0], attr[1].slice(1, -1));\n          }\n        });\n      }\n    }\n\n    tmpEl.documentElement.innerHTML = html;\n    this.log(\n      \"load content\",\n      tmpEl.documentElement.attributes,\n      tmpEl.documentElement.innerHTML.length\n    );\n\n    // Clear out any focused controls before inserting new page contents.\n    if (\n      document.activeElement &&\n      contains(document, this.options.selectors, document.activeElement)\n    ) {\n      try {\n        document.activeElement.blur();\n      } catch (e) {} // eslint-disable-line no-empty\n    }\n\n    this.switchSelectors(this.options.selectors, tmpEl, document, options);\n  },\n\n  abortRequest: require(\"./lib/abort-request\"),\n\n  doRequest: require(\"./lib/send-request\"),\n\n  handleResponse: require(\"./lib/proto/handle-response\"),\n\n  loadUrl: function(href, options) {\n    options =\n      typeof options === \"object\"\n        ? extend({}, this.options, options)\n        : clone(this.options);\n\n    this.log(\"load href\", href, options);\n\n    // Abort any previous request\n    this.abortRequest(this.request);\n\n    trigger(document, \"pjax:send\", options);\n\n    // Do the request\n    this.request = this.doRequest(\n      href,\n      options,\n      this.handleResponse.bind(this)\n    );\n  },\n\n  afterAllSwitches: function() {\n    // FF bug: Won’t autofocus fields that are inserted via JS.\n    // This behavior is incorrect. So if theres no current focus, autofocus\n    // the last field.\n    //\n    // http://www.w3.org/html/wg/drafts/html/master/forms.html\n    var autofocusEl = Array.prototype.slice\n      .call(document.querySelectorAll(\"[autofocus]\"))\n      .pop();\n    if (autofocusEl && document.activeElement !== autofocusEl) {\n      autofocusEl.focus();\n    }\n\n    // execute scripts when DOM have been completely updated\n    this.options.selectors.forEach(function(selector) {\n      forEachEls(document.querySelectorAll(selector), function(el) {\n        executeScripts(el);\n      });\n    });\n\n    var state = this.state;\n\n    if (state.options.history) {\n      if (!window.history.state) {\n        this.lastUid = this.maxUid = newUid();\n        window.history.replaceState(\n          {\n            url: window.location.href,\n            title: document.title,\n            uid: this.maxUid,\n            scrollPos: [0, 0]\n          },\n          document.title\n        );\n      }\n\n      // Update browser history\n      this.lastUid = this.maxUid = newUid();\n\n      window.history.pushState(\n        {\n          url: state.href,\n          title: state.options.title,\n          uid: this.maxUid,\n          scrollPos: [0, 0]\n        },\n        state.options.title,\n        state.href\n      );\n    }\n\n    this.forEachSelectors(function(el) {\n      this.parseDOM(el);\n    }, this);\n\n    // Fire Events\n    trigger(document, \"pjax:complete pjax:success\", state.options);\n\n    if (typeof state.options.analytics === \"function\") {\n      state.options.analytics();\n    }\n\n    if (state.options.history) {\n      // First parse url and check for hash to override scroll\n      var a = document.createElement(\"a\");\n      a.href = this.state.href;\n      if (a.hash) {\n        var name = a.hash.slice(1);\n        name = decodeURIComponent(name);\n\n        var curtop = 0;\n        var target =\n          document.getElementById(name) || document.getElementsByName(name)[0];\n        if (target) {\n          // http://stackoverflow.com/questions/8111094/cross-browser-javascript-function-to-find-actual-position-of-an-element-in-page\n          if (target.offsetParent) {\n            do {\n              curtop += target.offsetTop;\n\n              target = target.offsetParent;\n            } while (target);\n          }\n        }\n        window.scrollTo(0, curtop);\n      } else if (state.options.scrollTo !== false) {\n        // Scroll page to top on new page load\n        if (state.options.scrollTo.length > 1) {\n          window.scrollTo(state.options.scrollTo[0], state.options.scrollTo[1]);\n        } else {\n          window.scrollTo(0, state.options.scrollTo);\n        }\n      }\n    } else if (state.options.scrollRestoration && state.options.scrollPos) {\n      window.scrollTo(state.options.scrollPos[0], state.options.scrollPos[1]);\n    }\n\n    this.state = {\n      numPendingSwitches: 0,\n      href: null,\n      options: null\n    };\n  }\n};\n\nPjax.isSupported = require(\"./lib/is-supported\");\n\n// arguably could do `if( require(\"./lib/is-supported\")()) {` but that might be a little to simple\nif (Pjax.isSupported()) {\n  module.exports = Pjax;\n}\n// if there isn’t required browser functions, returning stupid api\nelse {\n  var stupidPjax = noop;\n  for (var key in Pjax.prototype) {\n    if (\n      Pjax.prototype.hasOwnProperty(key) &&\n      typeof Pjax.prototype[key] === \"function\"\n    ) {\n      stupidPjax[key] = noop;\n    }\n  }\n\n  module.exports = stupidPjax;\n}\n","/**\n * PJAX 刷新。\n * 对于 PJAX，最困难的问题在于不同脚本的刷新，页面切换之后，尽管大部分 PJAX 插件会提供自动执行脚本的功能。\n * 但此功能实际上需要各个网站定制化，因此需要将脚本分类，在 PJAX 的角度上大致能将脚本分为三类\n * 1、例如看板娘等全局页面都会存在的脚本，仅仅需要加载一次。\n * 2、例如网站访问量、AD 等每个页面都存在，并且 pjax 刷新的时候都需要重新加载的脚本。\n * 3、例如评论组件等仅在部分页面存在，不使用不加载的脚本。\n *\n * 对于上述脚本，每一类需要有每一类的处理方式。\n * 1、第一类脚本，通常需要将其放在非 PJAX 刷新区域之外，之后便不需要进行任何处理。只需保证在 PJAX 加载\n * 刷新区时，不重复加载即可。\n * 2、第二类脚本，例如 AD，如果用户从首页切换到某个目录，此时由于 PJAX 的原因，AD 并不会在第二个页面加载，\n * 此时的做法可以是重新调用目标 JS 的初始化，但此类脚本通常不包含初始化方法且种类繁多，处理极其麻烦。因此\n * 比较好的处理方式是重新加载此脚本的 script。如使用 replaceChild 重新替换脚本。\n * 3、第三类脚本，例如评论组件加载，当用户从首页进入到某个文章，评论组件并不会重新在此文章页面渲染，而且，\n * 通常文章会控制是否使用评论。此类脚本与第二类很相似，但不同点在于，此类组件可选并且只加载一次【全体】，\n * 而每个需要此插件的页面则只需重新执行初始化方法即可。因而此种方式也更为麻烦，因为不同的脚本具有不同的初始化\n * 方式。计划通过 Zero 的刷新事件来同步更新所有内联代码块的刷新功能。\n * \n * 脱离 Jquery，使用 https://github.com/MoOx/pjax\n */\nimport Pjax from 'pjax';\nimport { zero } from \"../zero\";\n\nnew Pjax({\n  selectors: [\n    'head title',\n    'content-wrap',\n    'post-toc-wrap',\n    '#pjax'\n  ],\n  switches: {\n    '.post-toc-wrap': Pjax.switches.innerHTML\n  },\n  analytics: false,\n  cacheBust: false,\n});\n\nwindow.addEventListener('pjax:success', () => {\n  // 第二种脚本处理。对添加了 id=pjax 或者 data-pjax 的 script，重新添加到文档树\n  let pjaxDoms = document.querySelectorAll('script[data-pjax], #pjax script') as NodeListOf<HTMLScriptElement>;\n  pjaxDoms.forEach(element => {\n    let code: string = element.text || element.textContent || element.innerHTML || '';\n    let parent: ParentNode | null = element.parentNode;\n    if (parent === null) {\n      return;\n    }\n    parent.removeChild(element);\n    let script: HTMLElementTagNameMap['script'] = document.createElement('script');\n    if (element.id) {\n      script.id = element.id;\n    }\n    if (element.className) {\n      script.className = element.className;\n    }\n    if (element.type) {\n      script.type = element.type;\n    }\n    if (element.src) {\n      script.src = element.src;\n      script.async = false;\n    }\n    if (element.dataset.pjax !== undefined) {\n      script.dataset.pjax = '';\n    }\n    if (code !== '') {\n      script.appendChild(document.createTextNode(code));\n    }\n    parent.appendChild(script);\n  });\n  // 第三种脚本处理方式，执行 zero 的 refresh 方法来触发监听事件。\n  zero.refresh();\n})\n"],"names":["foreachEls","els","fn","context","evalScript","el","code","src","parent","script","forEachEls","require$$0","require$$1","executeScripts","on","events","listener","useCapture","e","switches","oldEl","newEl","attrs","i","options","switchOptions","forEach","elsToRemove","elsToAdd","fragToAppend","animationEventNames","animatedElsNumber","sexyAnimationEnd","addClasses","defaultSwitches","parseOptions","defaultAnalytics","uniqueid","counter","id","trigger","opts","event","key","domFix","clone","obj","copy","attr","contains","doc","selectors","selectedEls","j","extend","target","to","source","noop","log","attrState","parseElement","linkAction","isDefaultPrevented","attrValue","checkIfShouldAbort","attachLink","that","formAction","virtLinkElement","parseFormElements","requestParams","formElements","element","tagName","type","values","opt","k","attachForm","foreachSelectors","cb","DOMcontext","selector","switchesSelectors","switchesOptions","fromEl","toEl","switchesQueue","newEls","oldEls","callback","queuedSwitch","abortRequest","request","updateQueryString","uri","value","re","separator","sendRequest","location","queryString","requestOptions","requestMethod","formData","requestPayload","timeout","param","newUid","require$$2","handleResponse","responseText","href","currentState","oldHref","a","oldHash","isSupported","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10","Pjax","st","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","html","tmpEl","htmlRegex","htmlAttribsRegex","matches","htmlAttrib","require$$17","require$$18","require$$19","autofocusEl","state","name","curtop","require$$20","pjaxModule","stupidPjax","zero"],"mappings":"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"}